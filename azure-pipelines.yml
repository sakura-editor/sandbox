trigger:
  branches:
    include:
      - master
      - develop
      - feature/*
  paths:
    exclude:
      - "*.md"
      - docs/*
      - .circleci/*
      - .cirrus.yml
      - .travis.yml
      - appveyor.yml
      - bitrise.yml
      - buddy.yml
      - codecov.yml
      - codefresh.yml
      - rocro.yml
      - shippable.yml
      - wercker.yml
      - Jenkinsfile

pr:
  branches:
    include:
      - master
      - develop
      - feature/*

jobs:
- job: windows
  displayName: 'Windows'
  pool:
    vmImage: 'VS2017-Win2016'

  strategy:
    maxParallel: 10
    matrix:
      Win32_Release:
        BuildPlatform: 'Win32'
        Configuration: 'Release'
      Win32_Debug:
        BuildPlatform: 'Win32'
        Configuration: 'Debug'
      Win64_Release:
        BuildPlatform: 'x64'
        Configuration: 'Release'
      Win64_Debug:
        BuildPlatform: 'x64'
        Configuration: 'Debug'

  steps:
  - template: azure-pipelines-template.yml

- job: python_check
  displayName: 'python_check'
  pool:
    vmImage: 'VS2017-Win2016'

  steps: 
  - template: azure-pipelines-template-python-check.yml
    parameters:
      versionSpec: '2.7'
      architecture: 'x64'

  - template: azure-pipelines-template-python-check.yml
    parameters:
      versionSpec: '3.7'
      architecture: 'x64'
